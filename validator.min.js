var validator=function(){function t(n){return document.querySelector(n)}function u(n,t){return o(n.querySelectorAll(t))}function i(n,t){var i=n.className.split(" "),r=t.split(" ");r.forEach(function(n){i.filter(function(t){return t==n}).length==0&&i.push(n)});n.className=i.join(" ")}function r(n,t){var r=n.className.split(" "),i=[],u=t.split(" ");r.forEach(function(n){u.filter(function(t){return n==t}).length==0&&i.push(n)});n.className=i.join(" ")}function o(n){return Array.prototype.slice.call(n)}function h(n,i,r,u){var f,e,o,s;if(n=="custom")return u(i);if(n=="maxlength")return i.length<=parseInt(u);if(n=="minlength")return i.length>=parseInt(u);if(n=="pattern")return new RegExp(u).test(i);if(n=="length")return i.length==parseInt(u);if(n=="not")return u.split(",").indexOf(i)==-1;if(n=="any")return u.split(",").indexOf(i)>-1;if(n=="min")switch(r){case"integer":case"number":case"float":return parseFloat(i)>=parseFloat(u);case"date":return Date.parse(i)>=Date.parse(u);default:throw"Type is invalid.";}if(n=="max")switch(r){case"integer":case"number":case"float":return parseFloat(i)<=parseFloat(u);case"date":return Date.parse(i)<=Date.parse(u);default:throw"Type is invalid.";}return n=="compare"?(f=typeof u=="string"?t("#"+u):u,f&&f.value==i):n=="date"?(e=u.test(i),!e)?e:(o=new Date(i),o=="Invalid Date")?!1:(s=i.replace(u,"$2"),o.getDate()==parseInt(s)):u.test(i)}function f(n,t){var e=[],l=[],o,r,c,i,f,u;for(i in t)if(["integer","number","float","date"].indexOf(i)>-1){o=i;break}for(i in t)(f=s[i],f)&&(c=t.label||i,u=f.error,"regex"in f?r=f.regex:(r=t[i],typeof r=="object"&&(u=r.error||u,r=r.value)),o=="date"&&n&&n.toLocaleString&&(n=n.toLocaleString().replace(",","")),h(i,n,o,r)||(e.push(i),u=u.replace(/\{(0|label)\}/g,c).replace(/\{(1|value)\}/g,r),l.push(u)));if(e.length>0)return{label:c,failed:e,errors:l}}function c(n,t){var u=[],i,r;for(i in t)(r=f(n[i],t[i]),r)&&(r.name=i,u.push(r));return u}function l(n){if(arguments.length==2)return c(arguments[0],arguments[1]);var e=typeof n=="string"?t(n):n,s=u(e,"input[rules], select[rules], textarea[rules]"),o=[],h=u(e,"*[rule-msg]");return h.forEach(function(n){r(n,"validator-error");r(n,validator.config.errorCss);n.$validator||(n.$validator={template:n.innerHTML})}),s.forEach(function(t){var l=["checkbox","radio"].indexOf(t.type)>-1?t.checked||"":t.value,a=t.getAttribute("rules-label")||t.name||t.id,v=t.getAttribute("rules").split(" "),h={label:a},s,c;v.forEach(function(n){var t=n.split("="),i=t[0],r=t.slice(1).join("=");h[i]=r||!0;i=="custom"&&(h.custom=validator.custom[r])});t.$validator||(t.$validator={},t.addEventListener("blur",function(){validator.validate(n)}));s=f(l,h);r(t,"input-error");r(t,validator.config.errorInputCss);s&&(i(t,"input-error"),i(t,validator.config.errorInputCss),s.name=t.name,c=u(e,"*[rule-msg]"),c.forEach(function(n){var r=n.getAttribute("rule-msg");(r==t.name||r==s.failed[0]||r==t.name+"."+s.failed[0])&&(i(n,"validator-error"),i(n,validator.config.errorCss),n.innerHTML=n.$validator.template||s.errors[0],n.innerHTML=n.innerHTML.replace(/\{(0|label)\}/g,s.label))}),o.push(s))}),o.filter(function(n){if(n.errors.length>0)return n})}var s={required:{regex:/^.{1,}$/,error:"{0} is required."},email:{regex:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,error:"{0} is not an email address."},number:{regex:/^-?\d+(.\d+)?/,error:"{0} is not a number."},integer:{regex:/^-?\d+$/,error:"{0} is not an integer."},float:{regex:/^-?\d+[.]\d+$/,error:"{0} is not a float."},date:{regex:/^(\d{1,2})[/](\d{1,2})[/](\d{2}(\d{2})?)(\s\d{1,2}[:]\d{2}([:]\d{2})?\s(am|pm))?$/i,error:"{0} is not a date."},ssn:{regex:/^\d{3}[-]?\d{2}[-]?\d{4}$/,error:"{0} is not a social security number."},creditCard:{regex:/^\d{15,16}$/,error:"{0} is not a credit card number."},maxlength:{error:"{0} must not exceed {1} characters."},minlength:{error:"{0} must not be less than {1} characters."},max:{error:"{0} must not be greater than {1}."},min:{error:"{0} must not be less than {1}."},length:{error:"{0} must be {1} characters long."},url:{regex:/.*/,error:"{0} is not a valid URL."},domain:{regex:/.*/,error:"{0} is not a valid domain."},pattern:{error:"{0} is not valid."},compare:{error:"{0} does not match."},not:{error:"{0} is not allowed."},any:{error:"{1} is not allowed."},custom:{error:""}},e="validatorCss",n;return t(e)||(n=document.createElement("style"),n.id=e,n.type="text/css",n.innerHTML="*[rule-msg]{position:absolute;left:-8000px}.validator-error{position:static;left:auto}",t("head").appendChild(n)),{config:{errorCss:"validator-error",errorInputCss:"input-error"},custom:{},validate:l,single:f}}();