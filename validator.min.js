var validator=function(){"use strict";function t(n){return document.querySelector(n)}function u(n,t){return o(n.querySelectorAll(t))}function i(n,t){var i=n.className.split(" "),r=t.split(" ");r.forEach(function(n){i.filter(function(t){return t==n}).length==0&&i.push(n)});n.className=i.join(" ")}function r(n,t){var r=n.className.split(" "),i=[],u=t.split(" ");r.forEach(function(n){u.filter(function(t){return n==t}).length==0&&i.push(n)});n.className=i.join(" ")}function o(n){return Array.prototype.slice.call(n)}function h(n,t,i,r){var u,f,e;if(n!="required"&&n!="compare"&&(t==""||t==undefined||t==null))return!0;if(n=="custom")return r(t);if(n=="maxlength")return t.length<=parseInt(r);if(n=="minlength")return t.length>=parseInt(r);if(n=="pattern")return new RegExp(r).test(t);if(n=="length")return t.length==parseInt(r);if(n=="not")return r.indexOf(t)==-1;if(n=="any")return r.indexOf(t)>-1;if(n=="min")switch(i){case"integer":case"number":case"float":return parseFloat(t)>=parseFloat(r);case"date":return Date.parse(t)>=Date.parse(r);default:throw"Type is invalid.";}if(n=="max")switch(i){case"integer":case"number":case"float":return parseFloat(t)<=parseFloat(r);case"date":return Date.parse(t)<=Date.parse(r);default:throw"Type is invalid.";}return n=="compare"?r==t:n=="date"?(u=r.test(t),!u)?u:(f=new Date(t),f=="Invalid Date")?!1:(e=t.replace(r,"$2"),f.getDate()==parseInt(e)):r.test(t)}function f(n,t){var e=[],l=[],o,r,c,i,f,u;for(i in t)if(["integer","number","float","date"].indexOf(i)>-1){o=i;break}for(i in t)(f=s[i],f)&&(c=t.label||i,u=f.error,"regex"in f?r=f.regex:(r=t[i],i=="compare"?r=arguments[2]:i=="any"||i=="not"||typeof r=="object"&&(u=r.error||u,r=r.value)),o=="date"&&n&&n.toLocaleString&&(n=n.toLocaleString().replace(",","")),h(i,n,o,r)||(e.push(i),u=u.replace(/\{(0|label)\}/g,c).replace(/\{(1|value)\}/g,r),l.push(u)));if(e.length>0)return{label:c,failed:e,errors:l}}function c(n,t){var e=[],i,u,r;for(i in t)(u=t[i],r=f(n[i],u,n[u.compare]),r)&&(r.name=i,e.push(r));return e}function l(n){if(arguments.length==2)return c(arguments[0],arguments[1]);var e=typeof n=="string"?t(n):n,s=u(e,"input[rules], select[rules], textarea[rules]"),o=[],h=u(e,"*[rule-msg]");return h.forEach(function(n){r(n,"validator-error");r(n,validator.config.errorCss);n.$validator||(n.$validator={template:n.innerHTML})}),s.forEach(function(s){var l,v=["checkbox","radio"].indexOf(s.type)>-1?s.checked||"":s.value,y=s.getAttribute("rules-label")||s.name||s.id,p=s.getAttribute("rules").split(" "),c={label:y},h,a;p.forEach(function(n){var f=n.split("="),i=f[0],r=f.slice(1).join("="),u;c[i]=r||!0;i=="custom"&&(c.custom=validator.custom[r]);i=="compare"&&(u=t("#"+r),u&&(l=u.value))});s.$validator||(s.$validator={},s.addEventListener("blur",function(){validator.validate(n)}));h=f(v,c,l);r(s,"input-error");r(s,validator.config.errorInputCss);h&&(i(s,"input-error"),i(s,validator.config.errorInputCss),h.name=s.name,a=u(e,"*[rule-msg]"),a.forEach(function(n){var t=n.getAttribute("rule-msg");(t==s.name||t==h.failed[0]||t==s.name+"."+h.failed[0])&&(i(n,"validator-error"),i(n,validator.config.errorCss),n.innerHTML=n.$validator.template||h.errors[0],n.innerHTML=n.innerHTML.replace(/\{(0|label)\}/g,h.label))}),o.push(h))}),o.filter(function(n){if(n.errors.length>0)return n})}var s={required:{regex:/^.{1,}$/,error:"{0} is required."},email:{regex:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,error:"{0} is not an email address."},number:{regex:/^-?\d+(.\d+)?/,error:"{0} is not a number."},integer:{regex:/^-?\d+$/,error:"{0} is not an integer."},float:{regex:/^-?\d+[.]\d+$/,error:"{0} is not a float."},date:{regex:/^(\d{1,2})[/](\d{1,2})[/](\d{2}(\d{2})?)(\s\d{1,2}[:]\d{2}([:]\d{2})?\s(am|pm))?$/i,error:"{0} is not a date."},ssn:{regex:/^\d{3}-\d{2}-\d{4}$/,error:"{0} is not a social security number."},creditcard:{regex:/^\d{15,16}$/,error:"{0} is not a credit card number."},maxlength:{error:"{0} must not exceed {1} characters."},minlength:{error:"{0} must not be less than {1} characters."},max:{error:"{0} must not be greater than {1}."},min:{error:"{0} must not be less than {1}."},length:{error:"{0} must be {1} characters long."},url:{regex:/^(http(s)?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?(\?.*)?$/,error:"{0} is not a valid URL."},domain:{regex:/^(http(s)?:\/\/)?([\w-]+\.)+[\w-]+(\/[\w-./?%&=]*)?$/,error:"{0} is not a valid domain."},pattern:{error:"{0} is not valid."},zip:{regex:/^\d{5}(-\d{4})?$/,error:"{0} is not a valid postal code."},phone:{regex:/^((\(\d{3}\)?)|(\d{3}-))?\d{3}-\d{4}$/,error:"{0} is not a valid phone."},compare:{error:"{0} does not match."},not:{error:"{0} is not allowed."},any:{error:"{1} is not allowed."},custom:{error:""}},e="validatorCss",n;return t(e)||(n=document.createElement("style"),n.id=e,n.type="text/css",n.innerHTML="*[rule-msg]{position:absolute;left:-8000px}.validator-error{position:static;left:auto}",t("head").appendChild(n)),{config:{errorCss:"validator-error",errorInputCss:"input-error"},custom:{},validate:l,single:f}}();
